<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Auth User Guide - DPS Tech Team docs</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://tech-docs.hmpps.service.justice.gov.uk/auth-user-guide.html">

      <meta name="robots" content="noindex" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="tech-docs.hmpps.service.justice.gov.uk" />
      <meta name="twitter:image" content="https://tech-docs.hmpps.service.justice.gov.uk/images/govuk-large.png" />
      <meta name="twitter:title" content="Auth User Guide - DPS Tech Team docs" />
      <meta name="twitter:url" content="https://tech-docs.hmpps.service.justice.gov.uk/auth-user-guide.html" />

      <meta property="og:image" content="https://tech-docs.hmpps.service.justice.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="DPS Tech Team docs" />
      <meta property="og:title" content="Auth User Guide" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://tech-docs.hmpps.service.justice.gov.uk/auth-user-guide.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          DPS Tech Team docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
      <nav>
        <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="mailto:dps+hmpps@digital.justice.gov.uk?subject=Tech+Team+docs+feedback">Feedback / Report a problem</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/">Documentation</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/hmpps-tech-docs">GitHub</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              <div class="search" data-module="search">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://tech-docs.hmpps.service.justice.gov.uk"/>
    <label class="govuk-label search__label" for="search" aria-hidden="true">
      Search (via Google)
    </label>
    <input
      type="text"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
  <div id="search-results" class="search-results" aria-hidden="true" role="dialog" aria-labelledby="search-results-title">
    <div class="search-results__inner">
      <button class="search-results__close">Close<span class="search-results__close-label"> search results</span></button>
      <h2 id="search-results-title" class="search-results__title" aria-live="assertive" role="alert">Results</h2>
      <div class="search-results__content"></div>
    </div>
  </div>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading" data-module="collapsible-navigation">
                      <ul>
  <li>
    <a href="/#dps-tech-team-docs"><span>DPS Tech Team docs</span></a>
    <ul>
      <li>
        <a href="/#adding-to-the-documentation"><span>Adding to the documentation</span></a>
      </li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <a href="/service-standards.html#service-standards"><span>Service Standards</span></a>
    <ul>
      <li>
        <a href="/service-standards.html#readme"><span>README</span></a>
      </li>
      <li>
        <a href="/service-standards.html#publishing-apis"><span>Publishing APIs</span></a>
      </li>
      <li>
        <a href="/service-standards.html#coding-standards"><span>Coding standards</span></a>
        <ul>
          <li>
            <a href="/service-standards.html#breaking-changes"><span>Breaking changes</span></a>
          </li>
          <li>
            <a href="/service-standards.html#releases"><span>Releases</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/service-standards.html#service-endpoints"><span>Service endpoints</span></a>
        <ul>
          <li>
            <a href="/service-standards.html#health"><span>/health</span></a>
          </li>
          <li>
            <a href="/service-standards.html#ping"><span>/ping</span></a>
          </li>
          <li>
            <a href="/service-standards.html#info"><span>/info</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/service-standards.html#deployments"><span>Deployments</span></a>
        <ul>
          <li>
            <a href="/service-standards.html#helm"><span>Helm</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/service-standards.html#monitoring"><span>Monitoring</span></a>
        <ul>
          <li>
            <a href="/service-standards.html#logging-requests-with-individual-clients"><span>Logging requests with individual clients</span></a>
          </li>
          <li>
            <a href="/service-standards.html#correlating-requests"><span>Correlating requests</span></a>
          </li>
          <li>
            <a href="/service-standards.html#application-version"><span>Application version</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <a href="/application-platform.html#hmpps-application-platform"><span>HMPPS Application Platform</span></a>
    <ul>
      <li>
        <a href="/application-platform.html#about-the-hmpps-application-platform"><span>About the HMPPS Application Platform</span></a>
        <ul>
          <li>
            <a href="/application-platform.html#benefits-of-using-the-application-platform"><span>Benefits of using the Application Platform</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/application-platform.html#application-platform-shared-components"><span>Application Platform Shared Components</span></a>
        <ul>
          <li>
            <a href="/application-platform.html#project-bootstrapper"><span>Project Bootstrapper</span></a>
          </li>
          <li>
            <a href="/application-platform.html#kotlin-template"><span>Kotlin Template</span></a>
          </li>
          <li>
            <a href="/application-platform.html#typescript-template"><span>Typescript Template</span></a>
          </li>
          <li>
            <a href="/application-platform.html#gradle-build-plugin"><span>Gradle Build Plugin</span></a>
          </li>
          <li>
            <a href="/application-platform.html#circleci-orb"><span>CircleCI Orb</span></a>
          </li>
          <li>
            <a href="/application-platform.html#helm-charts"><span>Helm Charts</span></a>
          </li>
          <li>
            <a href="/application-platform.html#spring-boot-sqs-starter-library"><span>Spring Boot SQS Starter Library</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/application-platform.html#creating-a-new-service"><span>Creating A New Service</span></a>
        <ul>
          <li>
            <a href="/application-platform.html#prerequisites"><span>Prerequisites</span></a>
          </li>
          <li>
            <a href="/application-platform.html#creating-resources-in-cloud-platform"><span>Creating resources in Cloud Platform</span></a>
          </li>
          <li>
            <a href="/application-platform.html#generating-your-project-and-build-pipeline"><span>Generating your project and build pipeline</span></a>
          </li>
          <li>
            <a href="/application-platform.html#configuring-the-build-pipeline"><span>Configuring the build pipeline</span></a>
          </li>
          <li>
            <a href="/application-platform.html#developing-locally"><span>Developing locally</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <a href="/auth-user-guide.html#auth-user-guide"><span>Auth User Guide</span></a>
    <ul>
      <li>
        <a href="/auth-user-guide.html#about-hmpps-auth"><span>About HMPPS Auth</span></a>
        <ul>
          <li>
          </li>
          <li>
            <a href="/auth-user-guide.html#before-you-start"><span>Before you start</span></a>
          </li>
          <li>
            <a href="/auth-user-guide.html#user-accounts"><span>User accounts</span></a>
          </li>
          <li>
            <a href="/auth-user-guide.html#dps-users"><span>DPS users</span></a>
          </li>
          <li>
            <a href="/auth-user-guide.html#users-that-sign-in-with-a-delius-account"><span>Users that sign in with a DELIUS account</span></a>
          </li>
          <li>
            <a href="/auth-user-guide.html#auth-external-accounts"><span>Auth external accounts</span></a>
          </li>
          <li>
            <a href="/auth-user-guide.html#users-that-have-multiple-accounts"><span>Users that have multiple accounts</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/auth-user-guide.html#creating-allocating-and-managing-user-permissions"><span>Creating, allocating and managing user permissions</span></a>
        <ul>
          <li>
          </li>
          <li>
            <a href="/auth-user-guide.html#groups-and-roles"><span>Groups and Roles</span></a>
          </li>
          <li>
            <a href="/auth-user-guide.html#creating-and-managing-groups"><span>Creating and managing groups</span></a>
          </li>
          <li>
            <a href="/auth-user-guide.html#creating-and-allocating-roles"><span>Creating and allocating roles</span></a>
          </li>
          <li>
            <a href="/auth-user-guide.html#giving-your-users-multiple-roles"><span>Giving your users multiple roles</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/auth-user-guide.html#onboarding-users"><span>Onboarding users</span></a>
      </li>
      <li>
        <a href="/auth-user-guide.html#helping-users-to-find-your-service"><span>Helping users to find your service</span></a>
        <ul>
          <li>
          </li>
          <li>
            <a href="/auth-user-guide.html#create-a-service-tile"><span>Create a service tile:</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="/auth-user-guide.html#getting-access-to-auth-and-testing-your-service"><span>Getting access to Auth and testing your service</span></a>
        <ul>
          <li>
            <a href="/auth-user-guide.html#requesting-tokens"><span>Requesting Tokens</span></a>
          </li>
          <li>
            <a href="/auth-user-guide.html#client-credentials"><span>Client credentials</span></a>
          </li>
          <li>
            <a href="/auth-user-guide.html#creating-test-user-accounts"><span>Creating test user accounts</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
              <h1 id="auth-user-guide">Auth User Guide</h1><p>This document describes HMPPS Auth, how it can be used and what you must consider before integrating with the service.</p>
<h2 id="about-hmpps-auth">About HMPPS Auth</h2><p>HMPPS Auth is for accessing HMPPS digital services which includes Digital Prison Services (DPS) and probation services.
This service can be used to authenticate users who need to use any of HMPPS&rsquo; digital products and legacy applications, such as Delius.</p>
<h4 id="you-can-use-hmpps-auth-to">You can use HMPPS Auth to:</h4>
<ul>
<li>Authenticate your service so that it can access the data it needs via HMPPS APIs</li>
<li>Provide users with access to your service</li>
</ul>
<h3 id="before-you-start">Before you start</h3><h5 id="when-you-are-designing-your-service-your-user-research-should-consider">When you are designing your service your user research should consider:</h5>
<ul>
<li>How will your users access your service? What kind of user accounts will they need? Do they work in prison or probation or are they external to MoJ? Do they already have NOMIS and/or Delius accounts?</li>
<li>How will you provide your users with the permissions they need to access and use your service? How will these be allocated and managed?</li>
<li>How will your users find your service? And how will they find out how to get help and support?</li>
<li>What data and from which existing APIs will your service be using data? How will it identify and authenticate itself to be allowed to access this data?</li>
</ul>
<h3 id="user-accounts">User accounts</h3><p>To access HMPPS digital services users need to sign in and have the appropriate role(s). Roles provie permission to access services and determine what a user can do in a service.</p>
<h5 id="users-can-sign-in-to-hmpps-auth-with-a">Users can sign in to HMPPS Auth with a:</h5>
<ul>
<li>Digitial Prison Services (DPS) account - this allows users to sign in with their NOMIS username and password</li>
<li>Probation account - this allows users to sign in with their Delius username and password</li>
<li>HMPPS Auth external accounts - for users that do not have a NOMIS or Delius account or are external to the Ministry of Justice. For example, the police or external prison training providers</li>
</ul>
<p>Some services need to be accessed by a mixture of users. For example, a service might be used by both prison and probation staff and the police, which means users may access the service by signing in with a NOMIS, Delius or an external account.</p>
<h3 id="dps-users">DPS users</h3><p>Digital Prison Services (DPS) users sign in to HMPPS Auth with their NOMIS account. NOMIS is a system for managing people in prison.</p>
<h4 id="dps-users-can">DPS users can:</h4>
<ul>
<li>sign in to HMPPS Auth with their NOMIS username and password</li>
<li>use HMPPS Auth to reset their NOMIS password and request an email reminder of their NOMIS username</li>
<li>be allocated digital prison service (DPS) roles</li>
<li>can manage other DPS user accounts, providing they have the right role (permission) to do this</li>
</ul>
<p>When designing your service you should consider whether any of your users have a NOMIS account.</p>
<p>While most prison staff will already have a NOMIS account some prison staff might not use NOMIS. And some prison staff that have NOMIS accounts do not use the legacy NOMIS system.</p>
<p>To find out how to onboard DPS users see <a href="#onboarding-users">onboarding users</a>.</p>
<p>To find out how to create NOMIS user accounts in the Auth developer environment see <a href="#getting-access-to-auth-and-testing-your-service">Testing your service</a></p>
<h3 id="users-that-sign-in-with-a-delius-account">Users that sign in with a DELIUS account</h3><p>Delius is a probation case management system, which is mainly used by probation staff but some prison staff also have Delius accounts.</p>
<h4 id="delius-users">Delius users:</h4>
<ul>
<li>can sign in to HMPPS Auth with a Delius username and password</li>
<li>automatically have the probation role, which means they can access any digital services that are available to users with this role</li>
<li>cannot be allocated additional roles</li>
<li>can change their Delius password in HMPPS Auth. This new password can then be used to sign into Delius too.</li>
<li>cannot change their email address in HMPPS Auth.</li>
</ul>
<h3 id="auth-external-accounts">Auth external accounts</h3>
<ul>
<li>are for users that don’t have a NOMIS or Delius account or are external to the Ministry of Justice. For example, users that work for charities, education or housing providers that work with people that are in or leaving prison.</li>
<li>can sign in with an email address and password</li>
<li>can change their email address and password</li>
<li>can be allocated an external role(s)</li>
<li>can be added to a group</li>
<li>can manage groups, providing they have the right role (permission) to do this</li>
<li>can manage other external users, providing they have the right role (permission) to do this</li>
</ul>
<h4 id="external-accounts-are-not-suitable-for-users-that-have">External accounts are not suitable for users that have:</h4>
<ul>
<li>A Delius account</li>
<li>A NOMIS account</li>
</ul>
<p>We have a hierarchy of external users to make the administration of user accounts simpler.  Group managers can be created by application support that are then responsible for creating and managing users within their own group.</p>
<h4 id="to-add-a-new-type-of-user-we-would-normally-suggest">To add a new type of user we would normally suggest:</h4>
<ul>
<li>Add a new group (or set of groups) for the new users</li>
<li>Identify support staff that would be able to administer the users, create accounts for them (if necessary) and give them management privileges within those groups</li>
</ul>
<p>We have scripts for bulk creation of groups and users if required, please contact the tech team for future information.</p>
<h3 id="users-that-have-multiple-accounts">Users that have multiple accounts</h3><p>Some users have both a NOMIS and a Delius account. This means that some users can see and access different digital services depending on which account they sign into HMPPS Auth with. For example, a user that signs into HMPPS Auth with their Delius account will only see services that are available to Delius users, even if these services are also available to NOMIS and external users. To access services that are only available to NOMIS users they will need to sign in to HMPPS Auth with their NOMIS account.</p>
<p>We are working on improving the user journeys for users that have multiple accounts.</p>
<h2 id="creating-allocating-and-managing-user-permissions">Creating, allocating and managing user permissions</h2><h5 id="the-digital-services-that-users-can-access-with-hmpps-auth-and-what-they-can-do-in-those-services-is-determined-by">The digital services that users can access with HMPPS Auth, and what they can do in those services, is determined by:</h5>
<ul>
<li>Which roles have been allocated to their account(s)</li>
<li>Which groups they belong to</li>
</ul>
<h3 id="groups-and-roles">Groups and Roles</h3><p>Roles and groups provide permission to access services and determine what a user can do in a service.</p>

<ul>
<li>Roles: can be allocated to all types of users</li>
<li>Groups: only external users can be added to and manage groups</li>
</ul>
<p>To provide access to your service it will need at least one role even if the service also has groups.</p>
<h3 id="creating-and-managing-groups">Creating and managing groups</h3><p>Content coming soon.</p>
<h3 id="creating-and-allocating-roles">Creating and allocating roles</h3><p>Roles are a way to assign permissions to your users. For example, your service might have a role that allows users to suggest changes to an offender’s record and another role to approve those changes.</p>
<h5 id="different-types-of-roles-can-be-allocated-to-different-types-of-account">Different types of roles can be allocated to different types of account:</h5>
<ul>
<li>DPS roles can be allocated to DPS users - people who sign in with a NOMIS username and password</li>
<li>Probation users (people who sign in with a DELIUS username and password) will automatically have the probation role.</li>
<li>External account users can be allocated to external users.</li>
</ul>
<h5 id="before-creating-roles-for-your-service-you-should-consider">Before creating roles for your service you should consider:</h5>
<ul>
<li>Who are your users and how will they access your service?</li>
<li>Do they have a NOMIS and/or a Delius account?</li>
<li>Will your service be used by people outside of Ministry of Justice? For example, the police or external training providers.</li>
</ul>
<h4 id="dps-nomis-user-roles">DPS (NOMIS) user roles</h4><p>Content coming soon.
<em>How to create a role, how the roles will be allocated to users</em></p>
<h4 id="external-user-roles">External user roles</h4><p>Content coming soon.
<em>How to create a role, how the roles will be allocated to users</em></p>
<h4 id="using-the-delius-probation-role">Using the Delius probation role</h4><p>Content coming soon.</p>
<h3 id="giving-your-users-multiple-roles">Giving your users multiple roles</h3><p>You might need to provide some of your users with more than one role in your service. For example, a manager may need to both suggest and approve decisions in a service.</p>
<p>Users can be allocated as many roles as they need but you should consider how your users will switch between roles in your service. For example, the Digital Categorisation service allows users with multiple roles to select which role they want to use from a menu at the top of the page.</p>
<p><a href="images/switch-roles.png" rel="noopener noreferrer"><img src="/images/switch-roles.png" alt="Change roles in application" /></a></p>
<h2 id="onboarding-users">Onboarding users</h2><p>Content coming soon.</p>
<h2 id="helping-users-to-find-your-service">Helping users to find your service</h2><p>HMPPS Auth provides users with access to a variety of digital services. This makes it easy for users to find everything they need from a single place.</p>
<h4 id="users-can-access-hmpps-digital-services-by">Users can access HMPPS digital services by:</h4>
<ul>
<li>Visiting the HMPPS Auth sign-in page and signing in</li>
<li>Clicking on the DPS desktop icon - this is available on most of the computers that prison staff use.</li>
</ul>
<p>When users are signed in to HMPPS Auth all of the services they have permission to access will be displayed as service tiles.</p>
<p>The landing page that users see after signing in at the HMPPS Auth sign in page:
<a href="images/select-service.png" rel="noopener noreferrer"><img src="/images/select-service.png" alt="Select Service" /></a></p>
<p>The Digital Prison Services homepage that users in prisons see after clicking on the ‘DPS’ desktop icon. This can also be accessed from the Digital Prison Services tile on the Auth landing page (shown above).
<a href="images/dps-select-service.png" rel="noopener noreferrer"><img src="/images/dps-select-service.png" alt="Select DPS Service" /></a></p>
<h3 id="create-a-service-tile">Create a service tile:</h3><p>To identify where you service tile should appear we need to know:
- Will your service only be accessed by prison staff? If yes, the service tile will be added to the Digital Prison Services homepage.
- Will your service be accessed by any users that sign in with an external Auth account and/or a Delius account?</p>
<p>To create a service tile you need to provide the following information about your service:</p>

<ul>
<li><strong>Service name</strong>: this will be displayed on the tile e.g Book a secure move</li>
<li><strong>Service description</strong>: a short description that will be displayed on the tile e.g Allocate the appropriate offender manager to a prisoner</li>
<li><strong>Roles</strong>: the role(s) users must have to be able to see the tile</li>
<li><strong>Url / email</strong>: the url of the service i.e where it should take the user once they have clicked on the tile</li>
<li><strong>Help email</strong>: we need a contact email address for any enquiries from your service users about logging in or accessing your service. Some teams set up a generic inbox for this.</li>
</ul>
<p>Before a tile is created you must also have a way your users to give feedback and get support with your service. We recommend adding your service to https://support-dev.hmpps.service.justice.gov.uk/feedback-and-support</p>
<h2 id="getting-access-to-auth-and-testing-your-service">Getting access to Auth and testing your service</h2><p>HMPPS Auth has three environments:</p>

<ul>
<li>Prod - this is the environment your users will access your live service in. Access to production is restricted as it includes real data about people in prison.</li>
<li>Preprod - this environment is a copy of the prod environment. Every two weeks preprod will be overwritten to match the prod environment.</li>
<li>Dev (T3) - this environment is for testing and does not include any real data about people in prison.</li>
</ul>
<h3 id="requesting-tokens">Requesting Tokens</h3>
<ul>
<li>We have put together diagrams below to provide information about tokens in HMPPS Auth. It should help explain the types of tokens which need to be requested from the DPS Tech Team.</li>
<li>We have covered a number of scenarios which describe typical shape of applications, their stack, interactions with Auth and other services.</li>
<li>There are a few concepts which influence the grant types to request:

<ul>
<li><strong>User roles</strong>

<ul>
<li>Roles which can be assigned to a user or an API</li>
</ul></li>
<li><strong>System roles</strong>

<ul>
<li>Roles which should not be assigned to users and they are provided to systems for talking to other APIs. For example <code>ROLE_COMMUNITY</code></li>
</ul></li>
<li><strong>Controlled roles</strong>

<ul>
<li>Endpoints protected by roles which are controlled because they require additional approval before they can be added to a client credential. For example <code>ROLE_GLOBAL_SEARCH</code></li>
</ul></li>
</ul></li>
</ul>
<p>This section does not discuss how to appropriately protect <em>your</em> endpoints with roles.</p>
<p><a href="images/tokens-key.png" rel="noopener noreferrer"><img src="/images/tokens-key.png" alt="Key" /></a></p>
<h4 id="scenario-1">Scenario 1</h4><p>When your services makes calls to services which are authenticated with <strong>user roles</strong>. You can use grant type of <em>Authorization Code</em></p>
<p><a href="images/tokens-scenario-1.png" rel="noopener noreferrer"><img src="/images/tokens-scenario-1.png" alt="Scenario 1" /></a></p>
<h4 id="scenario-2">Scenario 2</h4><p>When your API makes calls to services which are authenticated with <strong>system or controlled roles</strong>.</p>
<p><a href="images/tokens-scenario-2.png" rel="noopener noreferrer"><img src="/images/tokens-scenario-2.png" alt="Scenario 2" /></a></p>
<h4 id="scenario-3">Scenario 3</h4><p>When both your frontend and API make calls to services which are authenticated with <strong>system or controlled roles</strong>.</p>
<p><a href="images/tokens-scenario-3.png" rel="noopener noreferrer"><img src="/images/tokens-scenario-3.png" alt="Scenario 3" /></a></p>
<h3 id="client-credentials">Client credentials</h3><p>Content coming soon.</p>
<h3 id="creating-test-user-accounts">Creating test user accounts</h3><p>Content coming soon.</p>


              <div data-module='page-expiry' data-last-reviewed-on="2022-03-03">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 3 December 2021.

        It needs to be reviewed again on 3 March 2022
.
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 3 March 2022.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/hmpps-tech-docs/blob/main/source/auth-user-guide.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/hmpps-tech-docs/issues/new?labels=bug&amp;title=Re:%20'Auth%20User%20Guide'&amp;body=Problem%20with%20'Auth%20User%20Guide'%20(https://tech-docs.hmpps.service.justice.gov.uk/auth-user-guide.html)">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/hmpps-tech-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/application.js"></script>
  </body>
</html>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138188246-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-138188246-1');
</script>

<script>
  // Add the current window.location to the body of the
  // feedback email message.
  function sendFeedback(mailto, event) {
    event.preventDefault();

    var body = "Feedback/Problem on page: " + window.location + "\n";
    var href = mailto + '&body=' + encodeURIComponent(body);

    window.location = href;
  }

  $(document).ready(function() {
    var feedbackLink = $('a[href^="mailto:"]:contains("Feedback")')[0];
    var mailto = feedbackLink.href;
    $(feedbackLink).on('click', function(event) { sendFeedback(mailto, event); });
  });
</script>
